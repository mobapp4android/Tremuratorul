<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
<title>Scanare cod QR</title>

<script src="phonegap.js" type="text/javascript"></script>

<script>
// Bazat pe http://docs.phonegap.com/en/3.0.0/cordova_events_events.md.html#deviceready .
function onLoad() {
	// Când PhoneGap a terminat de inițializat, va declanșa "deviceready" și doar atunci apelăm "onDeviceReady" de mai jos.
	document.addEventListener("deviceready", onDeviceReady, false);
}

var scanner; // declarăm variabilă globală, ca s-o putem accesa

function onDeviceReady() { // aici se pune tot programul; numele "onDeviceReady" poate fi și altul, dar trebuie schimbat și mai sus
    scanner = { // variabila scanner va fi de tip obiect, înăuntru cu cheia "scaneaza" și valoarea funcție
		scaneaza: function() {
			cordova.plugins.barcodeScanner.scan( // pornim scanarea
				function (rezultat) { // funcția de succes
					if(!rezultat.cancelled) // scanarea nu a fost oprită, obține codul scanat
						alert("Text: "+rezultat.text+"\nFormat: "+rezultat.format+"\nOprit: "+rezultat.cancelled);
					else // scanarea a fost oprită
						alert("Scanarea a fost oprită.");
				},
				function (eroare) { // funcția de eroare
					alert("Eroare scanare: "+eroare);
				}
			);
		}
	}
}
</script>
</head>

<body onload="onLoad();">
<button onclick="scanner.scaneaza();">Scanează</button>
</body>
</html>
